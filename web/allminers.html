<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/bootstrap-table.min.css" integrity="sha256-UP+6xezmmsC027u61a8Ks+Xnp+TftBfw4PcrNyPXC40=" crossorigin="anonymous" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/extensions/filter-control/bootstrap-table-filter-control.css" integrity="sha256-scTkOuxpT3mjWR36xEaWlCEKBjieTRteuOk3tICdM7M=" crossorigin="anonymous" />
      <link rel="stylesheet" href="/css/dashboard.css">
      <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/bootstrap-table.min.js" integrity="sha256-l+jZldmOASkIPelan4NKyAFD+oGNqPulrVQwsjxuCXc=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/extensions/auto-refresh/bootstrap-table-auto-refresh.min.js" integrity="sha256-wM+7Q0ikz4eLE3kaE/Q4Dgb495iz2UzN3leHPLCdXCY=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/extensions/filter-control/bootstrap-table-filter-control.min.js" integrity="sha256-JpqYkcCJyvE+kxrFvhclJVe8LXkDIrqlio0V90A/yuM=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/extensions/export/bootstrap-table-export.min.js" integrity="sha256-dgKPXFPCSahQeFL/1cdwPPeEOBLAZR8hUdYIPLb/Jyw=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js" integrity="sha256-+JMHsXRyeTsws/tzbIh5YHQxRdKCuNjmvNcTFtY6DLc=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
      <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>
      <script src="/js/includes.js"></script>
      <script src="/js/utilities.js"></script>
      <title>MultiPoolMiner Local Dashboard</title>
    </head>
    <body data-navbaractive="navallminers">
    <div id="includeheader"></div>

    <div class="container-fluid">
      <div class="row">
      <div id="includenavbar"></div>
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">All Miners</h1>
          </div>


          <table id="miners" class="table"
            data-toggle="table"
            data-url="/miners"
            data-response-handler="formatAllMiners"
            data-filter-control="true"
            data-filter-show-clear="true"
            data-sort-order="desc"
            data-sort-name="Profit"
            data-cache="false"
            data-show-columns="true"
            data-show-toggle="true"
            data-show-refresh="true"
            data-icons="icons"
            >
            <thead>
              <tr>
                <th data-field="Name" data-sortable="true" data-filter-control="select">Name</th>
                <th data-field="Type" data-sortable="true" data-filter-control="select">Type</th>
                <th data-field="Profit" data-align="right" data-sortable="true" data-formatter="formatBTC">Profit</th>
                <th data-field="tPrimaryAlgorithm" data-sortable="true" data-filter-control="select">Algorithm</th>
                <th data-field="tPrimaryHashRate" data-sortable="true" data-formatter="formatHashRateValue">Primary Speed</th>
                <th data-field="tSecondaryAlgorithm" data-sortable="true" data-filter-control="select">Secondary Algorithm</th>
                <th data-field="tSecondaryHashRate" data-sortable="true" data-formatter="formatHashRateValue">Secondary Speed</th>
                
              </tr>
            </thead>
          </table>
        </main>
      </div>
    </div>

    <!-- End of page scripts -->
    <script type="text/javascript">
      function formatAllMiners(data) {
        // This function can alter the returned data before building the table, formatting it in a way
        // that is easier to display and manipulate in a table
        $.each(data, function(index, item) {
          console.log(item);
          // Format the type(s)
          item.Type = item.Type.toString();
          
          // Format the algorithms and hashrates
          var algorithms = Object.keys(item.HashRates);
          item.tPrimaryAlgorithm = algorithms[0];
          item.tSecondaryAlgorithm = algorithms[1];
          item.tPrimaryHashRate = item.HashRates[algorithms[0]];
          

          
        });
        return data;
      }
    </script>
  </body>
</html>